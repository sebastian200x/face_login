<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G-Cash Payment</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/members/payment_gcash.css') }}">
    {% include 'navbar.html' %}
</head>

<body style="margin-top: 100px;">
    <div class="payment-forms">
        <form method="POST" action="">
            <h1 class="center">G-Cash Payment</h1>
            {% if gcash%}
            {% for g in gcash %}
            <div class="pay-detail">
                <h3>Payment Details: </h3><br>
                <h3>Amount to pay: <span id="formattedAmount">{{ g[2] }}</span></h3>
                <h3>Due date: {{g[6].strftime('%B %d, %Y')}}</h3>
            </div>
            <br>
            <img src="{{ url_for('static', filename='images/gcash.jpg') }}" alt="gcash-qr" class="qr" id="qrCode">
            <div class="copy-container" id="copy">
                <span class="copy-text">09564629898</span>
                <button class="copy-button" onclick="copyText()"><i class="fa-regular fa-copy"></i> COPY</button>
            </div>
            <br>
            <div class="payment-details">
                <div class="rows-left">
                    <h3 class="det">Proof: </h3>
                </div>
                <div class="rows">
                    <div class="file-input-container">
                        <input class="file-input" type="file" name="proof" id="proof" accept="image/*">
                        <label class="file-input-label" for="proof">Choose Picture</label>
                    </div>
                </div>
                <!-- <div class="rows-left">
                <h3 class="det">Paid to: </h3>
            </div>
            <div class="rows">
                <input type="text" name="paid_to" title="Name of the receiver" placeholder="Name of the payment recipient (Leave)">
            </div> -->
                <div class="rows-left">
                    <h3 class="det">Amount: </h3>
                </div>
                <div class="rows">
                    <input type="text" name="amount" value="{{g[2]}}" title="Please put the exact amount"
                        placeholder="Amount of the payment" required>
                </div>
            </div>
            {%endfor%}
            {% endif %}

            <input class="pay" type="submit" value="Pay">
        </form>
    </div>
</body>

</html>

<script>

    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        qrCode.style.display = 'none';
    }
    else {
        copy.style.display = 'none';
    }

    function addCommas(number) {
        return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    var amountElement = document.getElementById("formattedAmount");
    amountElement.innerText = addCommas(amountElement.innerText);

    function copyText() {
        // Get the text to copy
        const textToCopy = document.querySelector('.copy-text');

        // Create a textarea element to hold the text temporarily
        const textarea = document.createElement('textarea');
        textarea.value = textToCopy.innerText;
        document.body.appendChild(textarea);

        // Select the text in the textarea
        textarea.select();
        textarea.setSelectionRange(0, 99999); // For mobile devices

        // Copy the selected text to the clipboard
        document.execCommand('copy');

        // Remove the textarea from the DOM
        document.body.removeChild(textarea);

        // Optionally, provide feedback to the user
        alert('Text copied to clipboard!');
    }
</script>